# OpenUtau Mobile

## 特别感谢

- [OpenUtau](https://github.com/stakira/OpenUtau)

## OpenUtau Mobile 是什么？

OpenUtau Mobile 是一个面向移动端的开源免费歌声合成软件。

一个基于 [OpenUtau内核](https://github.com/stakira/OpenUtau/tree/master/OpenUtau.Core) ，并进行了一些修补的编辑器。因此理论上可以使用 OpenUtau 的 USTX 工程文件。
## 快速开始

1. 在本项目的[release](https://github.com/vocoder712/OpenUtauMobile/releases)下载对应平台和架构的安装包并安装
2. 下载一个声库。通常你可以在[DiffSinger自制声库分享页面](https://docs.qq.com/sheet/DQXNDY0pPaEpOc3JN?tab=BB08J2)找到下载地址。声库通常以zip格式打包。
3. 打开软件 → 点击首页的 `歌手` 按钮 → 点击右下角 `+` → 选择上一步下载的声库安装包，然后按照指引安装。
4. 返回首页，点击 `新建` 进入主界面，开始你的创作吧！

你也可以在首页的 `打开` 直接找到并打开 OpenUtau 的 USTX 工程文件。

软件现阶段很不稳定，特别是受限于开发框架，容易出现内存管理问题。因此记得随时点点保存。如果崩溃，可以在工程文件同目录找到以 `.autosave.ustx` 结尾的文件恢复。

## 详细教程

主界面分为三个部分：

- 顶部标题栏：包含退出、标题、撤消重做、保存等功能
- 走带（编曲）区：
	- 左上角 `>>>` 按钮：展开详细内容
	- 右上时间轴：显示时间线，点击可以移动播放位置；双击可以添加时间曲速标记（不建议使用，目前不支持删除）
	- 左侧轨道头部：对于每个轨道：
		- 点击左侧彩签可以静音/解除静音
		- 点击头像更改歌手
		- 点击轨道名称更改轨道名称
		- 点击彩色圆点更改轨道颜色
		- 点击 `↑` `↓` 可以调整轨道顺序
		- 点击垃圾桶删除轨道
		- 滑动较短滑块调整声像
		- 滑动较长滑块调整音量
		- 双击重置
		
		下方 的 `+` 按钮可以添加新轨道
	- 右侧编曲区有两种编辑状态，点击铅笔按钮切换：
		- 只读状态：
			- 可以选择分片以在钢琴卷帘中编辑
			- 点击空白处可以取消选择
			- 单指移动滚动视图
			- 双指缩放缩放视图
		- 编辑状态：
			- 在空白处划动创建新的分片
			- 点击分片选中分片
			- 点击空白处以取消选择
			- 拖动分片内部移动分片
			- 拖动分片边缘手柄可以调整分片长度
- 主编辑区，分为钢琴卷帘和扩展区：
	- 钢琴卷帘：
		- 左侧钢琴键盘：~~点击可以试听音高（播放时也可以点击实时弹奏）~~
		- 右侧音符区，有四种编辑状态：
			- 音符编辑状态（默认）：
				- 点击空白处
					- 如果没有选中的音符，那么创建默认长度的音符
					- 如果有选中的音符，那么取消选择
				- 点击音符选中音符
				- 拖动音符内部移动音符
				- 拖动音符边缘手柄调整音符长度
				- 双击音符编辑歌词
				- 双指缩放缩放视图
				- 单指移动滚动视图
			- 音高线编辑状态：
				- 双指缩放缩放视图
				- 单指移动绘制音高线
			- ~~音高锚点编辑状态：~~
				- ~~点击空白处取消选择锚点~~
				- ~~点击锚点附近选中锚点~~
				- ~~双指缩放缩放视图~~
				- ~~单指移动拖动选中的锚点~~
				- ~~双击创建锚点~~
			- ~~颤音编辑状态：~~
				- ~~双指缩放缩放视图~~
				- ~~单指移动绘制颤音线~~
				- ~~唔，剩下的还没想好(:8D~~
 - 悬浮按钮
  - `AI` ：加载音高渲染结果。在渲染器支持自动音高时展示
  - `磁铁` ：单击启用/禁用吸附到网格；长按更改网格密度
	- 扩展区，分为三个区域：（都还没做完）
		- 左侧表情选择区和表情编辑模式切换
		- 音素编辑区
		- 表情参数编辑区

## 开发计划与已知BUG

- [x] 支持 MIDI 导入
- [x] 卸载已安装的歌手
- [ ] 图标没设计好，周围被裁剪了，先忍一下吧
- [ ] 内建Plugin不能加载
- [ ] 还没做安装oudep，不过可以root释放文件，记得修复权限
- [ ] 锚点音高
- [ ] 颤音
- [ ] 表情参数编辑
- [ ] 音素时长调整
- [ ] 音符属性编辑
- [ ] 更改音素器
- [ ] 更改渲染器
- [ ] 内核版本较旧，不支持打开USTX版本0.7及以上的工程文件
- [ ] 替换歌声分片的音频源
- [ ] 干声转换
- [ ] 测定音频 BPM
- [ ] 为 iOS 平台构建（门槛高，不一定成功）
- [ ] 为 Windows 平台构建
- [ ] English翻译尚不完全
- [ ] 日本語翻译
- [ ] 编译 Android 平台的 worlline 库
- [ ] 实现 Android 平台 onnx 推理硬件加速
- [ ] 双击分隔栏手柄最大化
- [ ] 滑动摩擦力
- [ ] Playback时点击钢琴键实时弹奏
- [ ] 音符编辑模式下可选音高线显示
- [ ] 批量歌词输入
- [ ] 多选音符
- [ ] 多选分片（Part）
- [ ] 删除时间与曲速标记
- [ ] 声像电平Slider自定义
- [ ] 总线电平表
- [ ] 仅Android10及以上可用放大镜
- [ ] UI可以改进

## 自行构建与贡献

如果你想让这个项目变得更好：

- 如果你发现了BUG或者有想实现的功能，可以先在[开发计划与已知BUG](#开发计划与已知BUG)看看有没有，如果没有，欢迎在[议题](https://github.com/vocoder712/OpenUtauMobile/issues)提出BUG，[讨论](https://github.com/vocoder712/OpenUtauMobile/discussion)提建议。

- 贡献代码：克隆本项目到本地后，使用 Visual Studio 打开项目根目录 `OpenUtauMobile.sln` 即可进入开发环境。建议新建分支操作。可以参考[开发计划与已知BUG](#开发计划与已知BUG)中的任务列表实现功能或修复BUG。完成后可以发起 Pull Request。

## 开源协议

本项目采用 [Apache 2.0](./LICENSE.txt) 许可证开源。

不是官方 OpenUtau ，不得冒充官方 OpenUtau 。
